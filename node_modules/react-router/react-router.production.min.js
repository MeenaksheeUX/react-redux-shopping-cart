import{createMemoryHistory as e,parsePath as t}from"history";import n from"react";function r(e,t){if(!e)throw Error(t)}let l=n.createContext({history:null,location:{pathname:"/",search:"",hash:""},pending:!1}),i=n.createContext({outlet:null,params:{},pathname:"",route:null}),a=e=>e(),u=n.useTransition||(()=>[a,!1]);function o(e){var{children:t=null,history:i,timeout:a=2e3}=e;let[o,c]=n.useState(i.location),[s,p]=u({timeoutMs:a});return e=n.useRef(!1),n.useContext(l).history&&r(!1),e.current||(e.current=!0,i.listen(e=>{var{location:t}=e;s(()=>{c(t)})})),n.createElement(l.Provider,{children:t,value:{history:i,location:o,pending:p}})}function c(e){let t=[];return n.Children.forEach(e,e=>{if(n.isValidElement(e)){var{children:r,from:l,path:i,to:a}=e.props;if(e.type===n.Fragment)t.push.apply(t,c(r));else{if(i=i||l||"/",a)e={path:i,redirectTo:a};else{e={path:i,element:e};let t=c(r);t.length&&(e.children=t)}t.push(e)}}}),t}function s(){return n.useContext(l).location}function p(){let{history:e,pending:t}=n.useContext(l),{pathname:a}=n.useContext(i);return null==e&&r(!1),n.useCallback((n,r)=>{var{replace:l,state:i}=void 0===r?{}:r;"number"==typeof n?e.go(n):(n=C(n,a),e[l||t?"replace":"push"](n,i))},[e,t,a])}function h(){return n.useContext(i).outlet}function f(e){let{pathname:t}=n.useContext(i);return n.useMemo(()=>C(e,t),[e,t])}function m(e,t,r){t=void 0===t?"":t,r=void 0!==r&&r;let l=s(),a=p(),{params:u,pathname:o}=n.useContext(i);t=t?[o,t].join("/").replace(/\/\/+/g,"/"):o;var c=n.useMemo(()=>d(e,l,t,r),[e,l,t,r]);if(!c)return null;var h=c.find(e=>null!=e.route.redirectTo);if(h){let{params:e,route:t}=h;return c=C(t.redirectTo,o),({pathname:h}=c),/:\w+/.test(h)&&(c=Object.assign({},c,{pathname:E(h,e)})),a(c,{replace:!0}),null}return c.reduceRight((e,r)=>{var{params:l,pathname:a,route:o}=r;return n.createElement(i.Provider,{children:o.element,value:{outlet:e,params:Object.assign({},u,l),pathname:[t,a].join("/").replace(/\/\/+/g,"/"),route:o}})},null)}function d(e,n,r,l){r=void 0===r?"":r,l=void 0!==l&&l,"string"==typeof n&&(n=t(n)),r=r.replace(/^\/+|\/+$/g,"");let i=n.pathname.slice(1);if(r)if(r===i)i="";else{if(!i.startsWith(r))return null;i=i.slice(r.length).replace(/^\/+/,"")}for(function(e){let t=e.reduce((e,t)=>([t]=t,e[t]=function(e){return e.split("/").reduce((e,t)=>e+(g.test(t)?2:"*"===t?-1:10),0)}(t),e),{});e.sort((e,n)=>{let[r,,l]=e;e=t[r];let[i,,a]=n;return e!==(n=t[i])?n-e:function(e,t){return e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n])?e[e.length-1]-t[t.length-1]:0}(l,a)})}(e=function e(t,n,r,l,i){return n=void 0===n?[]:n,r=void 0===r?"":r,l=void 0===l?[]:l,i=void 0===i?[]:i,t.forEach((t,a)=>{let u=[r,t.path].join("/").replace(/\/\/+/g,"/"),o=l.concat(t);a=i.concat(a),n.push([u,o,a]),t.children&&e(t.children,n,u,o,a)}),n}(e)),n=0;n<e.length;++n){let[t,a]=e[n];if([r]=v(t,!0,l),r.test(i))return a.map((e,t)=>{t=a.slice(0,t+1).map(e=>e.path).join("/").replace(/\/\/+/g,"/");let[n,r]=v(t,!1,l);return{params:x(r,(t=i.match(n)).slice(2)),pathname:"/"+t[1],route:e}})}return null}let g=/^:\w+$/;function v(e,t,n){let r=[],l="^("+e.replace(/^\/+/,"").replace(/\*\//,"").replace(/\/?\*?$/,"").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(e,t)=>(r.push(t),"([^\\/]+)"))+")";return e.endsWith("*")?(e.endsWith("/*")&&(l+="\\/?"),r.push("*"),l+="(.*)"):t&&(l+="\\/?"),t&&(l+="$"),[new RegExp(l,n?void 0:"i"),r]}function x(e,t){return e.reduce((e,n,r)=>(e[n]=t[r],e),{})}function y(e,t){let n=t.replace(/\/+$/,"").replace(/\/\/+/g,"/").split("/");return e.replace(/\/\/+/g,"/").split("/").forEach(e=>{".."===e?1<n.length&&n.pop():"."!==e&&n.push(e)}),1<n.length?n.join("/").replace(/\/\/+/g,"/"):"/"}function C(e,n){n=void 0===n?"/":n;let{pathname:r,search:l="",hash:i=""}="string"==typeof e?t(e):e;return{pathname:r?r.startsWith("/")?y(r,"/"):y(r,n):n,search:l,hash:i}}function E(e,t){return t=void 0===t?{}:t,e.replace(/:(\w+)/g,(e,n)=>t[n]||`:${n}`).replace(/\*$/,e=>t[e]||e)}var $=function(t){var{children:r,initialEntries:l,initialIndex:i,timeout:a}=t;return null==(t=n.useRef(null)).current&&(t.current=e({initialEntries:l,initialIndex:i})),n.createElement(o,{children:r,history:t.current,timeout:a})},j=function(e){var{to:t,replace:n=!1,state:r}=e;return p()(t,{replace:n,state:r}),null},b=function(){return h()},w=function(){return null},R=function(e){return({element:e}=e),e},T=o,W=function(e){var{basename:t="",caseSensitive:r=!1,children:l}=e;return n.useContext(i),m(e=c(l),t,r)},M=c,O=E,k=d,I=C,P=function(e,t){t=void 0===t||t;let{history:i}=n.useContext(l);null==i&&r(!1),n.useEffect(()=>{if(t){let t=i.block(n=>{let r=Object.assign({},n,{retry(){t(),n.retry()}});e(r)});return t}},[i,t,e])},S=function(e){e=f(e);let{history:t}=n.useContext(l);return null==t&&r(!1),t.createHref(e)},F=s,H=function(e){let t=s();return e=f(e),t.pathname===e.pathname},V=p,q=h,z=function(){return n.useContext(i).params},A=f,B=m;export{$ as MemoryRouter,j as Navigate,b as Outlet,w as Redirect,R as Route,T as Router,W as Routes,M as createRoutesFromChildren,O as generatePath,k as matchRoutes,I as resolveLocation,P as useBlocker,S as useHref,F as useLocation,H as useMatch,V as useNavigate,q as useOutlet,z as useParams,A as useResolvedLocation,B as useRoutes};
//# sourceMappingURL=react-router.production.min.js.map
