import { createMemoryHistory, parsePath } from 'history';import PropTypes from 'prop-types';import React from 'react';function h(){h=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a};return h.apply(this,arguments)}var l="production"!==process.env.NODE_ENV?function(a){return Object.freeze(a)}:function(a){return a};function m(a,b){if(!a)throw Error(b);}var p=React.createContext({history:null,location:{pathname:"/",search:"",hash:""},pending:!1});
"production"!==process.env.NODE_ENV&&(p.Consumer.displayName="Location.Consumer",p.Provider.displayName="Location.Provider");var q=React.createContext({outlet:null,params:l({}),pathname:"",route:null});"production"!==process.env.NODE_ENV&&(q.Consumer.displayName="Route.Consumer",q.Provider.displayName="Route.Provider");
function r(a){var b=a.children,c=a.initialEntries,d=a.initialIndex;a=a.timeout;var e=React.useRef(null);null==e.current&&(e.current=createMemoryHistory({initialEntries:c,initialIndex:d}));return React.createElement(t,{children:b,history:e.current,timeout:a})}
"production"!==process.env.NODE_ENV&&(r.displayName="MemoryRouter",r.propTypes={children:PropTypes.node,timeout:PropTypes.number,initialEntries:PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.string,PropTypes.shape({pathname:PropTypes.string,search:PropTypes.string,hash:PropTypes.string,state:PropTypes.object,key:PropTypes.string})])),initialIndex:PropTypes.number});function u(a){var b=a.to,c=a.replace;c=void 0===c?!1:c;a=a.state;v()(b,{replace:c,state:a});return null}
"production"!==process.env.NODE_ENV&&(u.displayName="Navigate",u.propTypes={to:PropTypes.oneOfType([PropTypes.string,PropTypes.shape({pathname:PropTypes.string,search:PropTypes.string,hash:PropTypes.string})]).isRequired,replace:PropTypes.bool,state:PropTypes.object});function w(){return x()}"production"!==process.env.NODE_ENV&&(w.displayName="Outlet",w.propTypes={});function y(){return null}
"production"!==process.env.NODE_ENV&&(y.displayName="Redirect",y.propTypes={children:function(a,b){if(null!=a[b])return Error("A <Redirect> should not have child routes; they will never be rendered.")},from:PropTypes.string,to:PropTypes.oneOfType([PropTypes.string,PropTypes.shape({pathname:PropTypes.string,search:PropTypes.string,hash:PropTypes.string})])});function z(a){return a.element}
"production"!==process.env.NODE_ENV&&(z.displayName="Route",z.propTypes={children:PropTypes.node,element:PropTypes.element,path:PropTypes.string});function A(a){return a()}var B=React.useTransition||function(){return[A,!1]};
function t(a){var b=a.children;b=void 0===b?null:b;var c=a.history;a=a.timeout;var d=void 0===a?2E3:a,e=React.useState(c.location);a=e[0];var f=e[1];d=B({timeoutMs:d});var g=d[0];d=d[1];e=React.useRef(!1);React.useContext(p).history?"production"!==process.env.NODE_ENV?m(!1,"You rendered a <Router> inside another <Router> but you should only ever render one in a given app."):m(!1):void 0;e.current||(e.current=!0,c.listen(function(a){var b=a.location;g(function(){f(b)})}));return React.createElement(p.Provider,
{children:b,value:{history:c,location:a,pending:d}})}"production"!==process.env.NODE_ENV&&(t.displayName="Router",t.propTypes={children:PropTypes.node,history:PropTypes.shape({action:PropTypes.string,location:PropTypes.object,push:PropTypes.func,replace:PropTypes.func,go:PropTypes.func,listen:PropTypes.func,block:PropTypes.func}),timeout:PropTypes.number});
function C(a){var b=a.basename;b=void 0===b?"":b;var c=a.caseSensitive;c=void 0===c?!1:c;a=a.children;var d=React.useContext(q),e=d.pathname,f=d.route;d=f&&f.path;if("production"!==process.env.NODE_ENV){if(f=!f||f.path.endsWith("*"),e='You rendered <Routes> at "'+e+'" (under route path "'+d+'") but the route path has no trailing "*", so the child routes won\'t be able to match any part of the URL. You should use route path "'+(d+'/*" instead.'),!f){"undefined"!==typeof console&&console.warn(e);try{throw Error(e);
}catch(g){}}}else void 0;a=D(a);return E(a,b,c)}"production"!==process.env.NODE_ENV&&(C.displayName="Routes",C.propTypes={basename:PropTypes.string,caseSensitive:PropTypes.bool,children:PropTypes.node});
function D(a){var b=[];React.Children.forEach(a,function(a){if(React.isValidElement(a)){var c=a.props,e=c.children,f=c.from,g=c.path;c=c.to;a.type===React.Fragment?b.push.apply(b,D(e)):(g=g||f||"/",c?a={path:g,redirectTo:c}:(a={path:g,element:a},e=D(e),e.length&&(a.children=e)),b.push(a))}});return b}function F(){return React.useContext(p).location}
function v(){var a=React.useContext(p),b=a.history,c=a.pending,d=React.useContext(q).pathname;null==b?"production"!==process.env.NODE_ENV?m(!1,"navigation may be used only in the context of a <Router> component"):m(!1):void 0;return React.useCallback(function(a,f){var e=void 0===f?{}:f;f=e.replace;e=e.state;"number"===typeof a?b.go(a):(a=G(a,d),b[f||c?"replace":"push"](a,e))},[b,c,d])}function x(){return React.useContext(q).outlet}
function H(a){var b=React.useContext(q).pathname;return React.useMemo(function(){return G(a,b)},[a,b])}
function E(a,b,c){void 0===b&&(b="");void 0===c&&(c=!1);var d=F(),e=v(),f=React.useContext(q),g=f.params,n=f.pathname;b=b?I([n,b]):n;f=React.useMemo(function(){return J(a,d,b,c)},[a,d,b,c]);if(!f)return null;var k=f.find(function(a){return null!=a.route.redirectTo});return k?(f=k.params,n=G(k.route.redirectTo,n),k=n.pathname,/:\w+/.test(k)&&(n=h({},n,{pathname:K(k,f)})),e(n,{replace:!0}),null):f.reduceRight(function(a,c){var d=c.pathname,e=c.route;return React.createElement(q.Provider,{children:e.element,
value:{outlet:a,params:l(h({},g,{},c.params)),pathname:I([b,d]),route:e}})},null)}
function J(a,b,c,d){function e(a){a=g[a];var b=a[1];if(L(a[0],!0,d)[0].test(f))return{v:b.map(function(a,c){c=b.slice(0,c+1);c=I(c.map(function(a){return a.path}));var e=L(c,!1,d);c=e[1];e=f.match(e[0]);return{params:M(c,e.slice(2)),pathname:"/"+e[1],route:a}})}}void 0===c&&(c="");void 0===d&&(d=!1);"string"===typeof b&&(b=parsePath(b));c=c.replace(/^\/+|\/+$/g,"");var f=b.pathname.slice(1);if(c)if(c===f)f="";else if(f.startsWith(c))f=f.slice(c.length).replace(/^\/+/,"");else return null;var g=N(a);
O(g);for(a=0;a<g.length;++a)if(b=e(a),"object"===typeof b)return b.v;return null}function N(a,b,c,d,e){void 0===b&&(b=[]);void 0===c&&(c="");void 0===d&&(d=[]);void 0===e&&(e=[]);a.forEach(function(a,g){var f=I([c,a.path]),k=d.concat(a);g=e.concat(g);b.push([f,k,g]);a.children&&N(a.children,b,f,k,g)});return b}var P=/^:\w+$/;function Q(a){return a.split("/").reduce(function(a,c){return a+(P.test(c)?2:"*"===c?-1:10)},0)}
function O(a){var b=a.reduce(function(a,b){b=b[0];a[b]=Q(b);return a},{});a.sort(function(a,d){var c=a[2];a=b[a[0]];var f=d[2];d=b[d[0]];return a!==d?d-a:R(c,f)})}function R(a,b){return a.length===b.length&&a.slice(0,-1).every(function(a,d){return a===b[d]})?a[a.length-1]-b[b.length-1]:0}
function L(a,b,c){var d=[],e="^("+a.replace(/^\/+/,"").replace(/\*\//,"").replace(/\/?\*?$/,"").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,function(a,b){d.push(b);return"([^\\/]+)"})+")";a.endsWith("*")?(a.endsWith("/*")&&(e+="\\/?"),d.push("*"),e+="(.*)"):b&&(e+="\\/?");b&&(e+="$");return[new RegExp(e,c?void 0:"i"),d]}function M(a,b){return a.reduce(function(a,d,e){a[d]=b[e];return a},{})}function I(a){return a.join("/").replace(/\/\/+/g,"/")}
function S(a,b){var c=b.replace(/\/+$/,"").replace(/\/\/+/g,"/").split("/");a.replace(/\/\/+/g,"/").split("/").forEach(function(a){".."===a?1<c.length&&c.pop():"."!==a&&c.push(a)});return 1<c.length?I(c):"/"}function G(a,b){void 0===b&&(b="/");var c="string"===typeof a?parsePath(a):a;a=c.pathname;var d=c.search;d=void 0===d?"":d;c=c.hash;c=void 0===c?"":c;return{pathname:a?a.startsWith("/")?S(a,"/"):S(a,b):b,search:d,hash:c}}
function K(a,b){void 0===b&&(b={});return a.replace(/:(\w+)/g,function(a,d){return b[d]||":"+d}).replace(/\*$/,function(a){return b[a]||a})}var MemoryRouter=r;var Navigate=u;var Outlet=w;var Redirect=y;var Route=z;var Router=t;var Routes=C;var createRoutesFromChildren=D;var generatePath=K;var matchRoutes=J;var resolveLocation=G;
var useBlocker=function(a,b){void 0===b&&(b=!0);var c=React.useContext(p).history;null==c?"production"!==process.env.NODE_ENV?m(!1,"navigation blocking may be used only in the context of a <Router> component"):m(!1):void 0;React.useEffect(function(){if(b){var d=c.block(function(b){var c=h({},b,{retry:function(){d();b.retry()}});a(c)});return d}},[c,b,a])};
var useHref=function(a){a=H(a);var b=React.useContext(p).history;null==b?"production"!==process.env.NODE_ENV?m(!1,"href resolution may be used only in the context of a <Router> component"):m(!1):void 0;return b.createHref(a)};var useLocation=F;var useMatch=function(a){var b=F();a=H(a);return b.pathname===a.pathname};var useNavigate=v;var useOutlet=x;var useParams=function(){return React.useContext(q).params};var useResolvedLocation=H;var useRoutes=E;export{MemoryRouter,Navigate,Outlet,Redirect,Route,Router,Routes,createRoutesFromChildren,generatePath,matchRoutes,resolveLocation,useBlocker,useHref,useLocation,useMatch,useNavigate,useOutlet,useParams,useResolvedLocation,useRoutes};
//# sourceMappingURL=react-router.js.map
